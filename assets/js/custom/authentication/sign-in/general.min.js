"use strict";var KTSigninGeneral=function(){var c,b,a;return{init:function(){c=document.querySelector("#kt_sign_in_form"),b=document.querySelector("#kt_sign_in_submit"),a=FormValidation.formValidation(c,{fields:{email:{validators:{notEmpty:{message:"El campo usuario es requerido"}}},password:{validators:{notEmpty:{message:"El campo contrase&ntilde;a es requerido"},callback:{message:"Por favor introduzca una contrase&ntilde;a v&aacute;lida",callback:function(d){if(d.value.length>0){return _validatePassword()}}}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}});b.addEventListener("click",(function(d){d.preventDefault();let mensajeError=null,botonSubmit=$("#kt_sign_in_submit");a.validate().then((function(e){if("Valid"===e){b.setAttribute("data-kt-indicator","on");b.disabled=!0;setTimeout((function(){b.removeAttribute("data-kt-indicator");b.disabled=!1;$.ajax({url:base_url+"home/validarDatosUsuario",type:"POST",data:$("#kt_sign_in_form").serialize(),dataType:"json",beforeSend:function(){botonSubmit.attr("disabled",true)},success:function(f){switch(f.status){case"correcto":let url=base_url+"home/index";location.href=url;toastr.success("Acceso correcto!!!","CORRECTO");break;case"error":mensajeError="Error, el usuario/contrase&ntilde;a no coinciden";botonSubmit.attr("disabled",false);break;case"inactivo":mensajeError="El usuario est&aacute; inactivo, cont&aacute;ctese con el administrador";botonSubmit.attr("disabled",false);break;default:mensajeError="Error desconocido al ejecutar la petici&oacute;n";botonSubmit.attr("disabled",false)}if(mensajeError!==null){swal.fire({html:mensajeError,icon:"error",buttonsStyling:false,confirmButtonText:"Aceptar",customClass:{confirmButton:"btn font-weight-bold btn-light-primary"}}).then(function(){KTUtil.scrollTop()})}},error:function(f){toastr.error("Ocurri&oacute; un error al realizar la petici&oacute;n "+f,"ERROR");botonSubmit.attr("disabled",false)}})}),2000)}else{Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}}))}))}}}();KTUtil.onDOMContentLoaded((function(){KTSigninGeneral.init()}));